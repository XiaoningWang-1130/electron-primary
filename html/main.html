<!DOCTYPE html>
<html>

<head>
    <title>信息列表</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="./css/basic.css">
</head>

<body>
    <nav>
        <div class="nav-wrapper">
            <a href="#" class="brand-logo">信息列表</a>
        </div>
    </nav>
    <ul class="" id="wrap">
        <!-- <li class="collection-item">信息列表项001 <i class="close-btn">x</i></li>
            <li class="collection-item">信息列表项002 <i class="close-btn">x</i></li>
            <li class="collection-item">信息列表项003 <i class="close-btn">x</i></li> -->
    </ul>
    <h3 class="space-section">暂无信息，请添加信息</h3>
    <style type="text/css">
        .space-section {

            text-align: center;
            color: #666;
            font-size: 18px;
            height: 100px;
            line-height: 100px;
        }

        ul li {
            position: relative;
        }

        .close-btn {
            position: absolute;
            width: 30px;
            height: 30px;
            text-align: center;
            cursor: pointer;
            font-size: 25px;
            right: 10px;
            top: 7px;
            color: #ccc;
        }

        .close-btn:hover {
            color: #333;
        }
    </style>
    <script>
        const electron = require('electron')
        const { ipcRenderer } = electron
        const ul = document.querySelector('#wrap')
        const spaceSection = document.querySelector('.space-section')

        ipcRenderer.on('info:add', (e, val) => {
            ul.className = 'collection'
            const li = document.createElement('li')
            li.className = 'collection-item'
            li.innerHTML = val + '<i class="close-btn">x</i>'
            ul.append(li)
            spaceSection.style.display = 'none'
            domListener()
        })

        function domListener() {
            document.querySelectorAll('.close-btn').forEach(el => {
                el.addEventListener('click', function (ev) {
                    this.parentNode.remove()
                    if (ul.children.length === 0) {
                        ul.className = ''
                        spaceSection.style.display = 'block'
                    }
                })
            })
        }
        domListener()

        ipcRenderer.on('info:clear', (e) => {
            ul.innerHTML = ''
            ul.className = ''
            spaceSection.style.display = 'block'
        })
    </script>
</body>

</html>